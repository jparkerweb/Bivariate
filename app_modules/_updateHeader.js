// -------------------
// -- Update Header --
// -------------------
// jshint esversion: 6

let updateHeader = function updateHeader(testPath) {
	// return new Promise(function(resolve, reject) {
		const replaceInFile = require('replace-in-file')
		testPath = testPath + "/index.html"

		// let find1 = ".ReactModal__Body--open {"
		let replacement1 = "<style>a[href*='BackstopJ'] {display: none;}"
		
		// let find2 = "<div id=\"root\">"
		let replacement2 = "<a style='position:absolute; right:32px; top:10px; display:inline-block; z-index:10000;' href='https://github.com/jparkerweb/bivariate/' target='_blank'><img src='data:image/png;base64,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' /></a><div id='root'>"
		
		
		templateOptions = {
			cwd: "backstop_data/html_report/",
			files: [testPath],
			from: [
				/BackstopJS/g,
				/<style>/,
				/<div id=\"root\">/
			],
			to: [ "Bivariate", replacement1, replacement2 ]
		}
		try {
			const changes = replaceInFile.sync(templateOptions)
			// console.log('Modified files:', changes.join(', '))
		}
		catch (error) {
			console.error('error updating header:', error)
		}
	// })
}


// *************
// ** Exports **
// *************
module.exports = updateHeader
